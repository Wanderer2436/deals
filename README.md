# deals
ТЕСТОВОЕ ЗАДАНИЕ компания Sibdev

## Запуск сервиса

1. Cкачать репозиторий
~~~
$ git clone https://github.com/Wanderer2436/deals
$ cd deals
~~~
2. Запустить проект
~~~
$ docker-compose up
~~~
3. Перейти по адресу
[http://0.0.0.0:8000/](http://0.0.0.0:8000/)


## Работа с сервисом

### Загрузка файла со сделками
#### Запрос

 - Адрес: ```/core/deal_file_upload```
 - Метод: POST

Тело запроса:
```
{
  "deals": file.csv
}
```

#### Ответ
В случае отсутствия ошибок HTTP статус ответа 200. 

Тело ответа:
```
{
  "Status": "OK"
}
```

### Получение списка из 5 клиентов, потративших наибольшую сумму за весь период
#### Запрос

 - Адрес: ```/core/customers/```
 - Метод: GET

#### Ответ
В случае отсутствия ошибок HTTP статус ответа 200. 

Тело ответа:
```
{
  "response": [
    {
      "id": 40,
      "spent_money": 451731,
      "gems": [
        "Танзанит",
        "Рубин",
        "Сапфир"
      ],
      "username": "resplendent"
    },
    {
      "id": 39,
      "spent_money": 217794,
      "gems": [
        "Сапфир",
        "Петерсит"
      ],
      "username": "bellwether"
    },
    {
      "id": 47,
      "spent_money": 120419,
      "gems": [
        "Танзанит",
        "Петерсит"
      ],
      "username": "uvulaperfly117"
    },
    {
      "id": 50,
      "spent_money": 108957,
      "gems": [
        "Изумруд"
      ],
      "username": "braggadocio"
    },
    {
      "id": 44,
      "spent_money": 100132,
      "gems": [
        "Изумруд",
        "Рубин"
      ],
      "username": "turophile"
    }
  ]
}
```

Поля ответа:

   - "id": Порядковый номер в БД
   - "spent_money": Общая сумма потраченных денег на сделки
   - "gems": Список камней
   - "username": Логин пользователя
